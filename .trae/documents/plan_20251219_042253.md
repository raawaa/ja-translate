# 修复书名翻译问题

## 问题分析

通过分析代码，我发现当前程序没有正确翻译包含日文字符的书名的原因是：

1. **命名空间处理问题**：
   - OPF文件中的书名元素是 `<dc:title>书名</dc:title>`（带有dc命名空间前缀）
   - `extract_translatable_blocks_opf` 函数提取时会去掉命名空间前缀，返回 `<title>书名</title>`
   - `update_file_content_by_type_incremental` 函数尝试查找 `<title>书名</title>` 进行替换，但实际文件中是 `<dc:title>书名</dc:title>`，所以替换失败

2. **替换逻辑问题**：
   - 函数使用简单的字符串替换，无法处理带有命名空间前缀的标签

## 修复方案

### 1. 修复命名空间处理问题

修改 `extract_translatable_blocks_opf` 函数，保留原始的命名空间前缀：

- 在XML解析部分，保留完整的标签名（包括命名空间前缀）
- 在正则表达式部分，也保留完整的标签名

### 2. 修复OPF文件更新逻辑

修改 `update_file_content_by_type_incremental` 函数中的OPF处理部分：

- 确保能够正确处理带有命名空间前缀的标签
- 使用更精确的匹配方式，考虑命名空间前缀

## 实施步骤

1. 修改 `extract_translatable_blocks_opf` 函数，保留完整的命名空间标签
2. 修改 `update_file_content_by_type_incremental` 函数，正确处理带有命名空间前缀的OPF标签
3. 测试修复后的程序，确保包含日文字符的书名能够被正确翻译

## 预期效果

修复后，程序将能够正确识别和翻译OPF文件中包含日文字符的书名，而对于只有汉字的书名则会跳过翻译，符合用户的期望。